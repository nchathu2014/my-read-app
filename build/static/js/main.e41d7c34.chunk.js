(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){},25:function(e,t,a){e.exports=a(48)},33:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(23),l=a.n(r),c=a(8),s=a(6),i=a.n(s),u=a(9),h=a(11),m=a(12),d=a(14),f=a(13),b=a(15),k=a(0),p=a(19),v="https://reactnd-books-api.udacity.com",E=localStorage.token;E||(E=localStorage.token=Math.random().toString(36).substr(-8));var g={Accept:"application/json",Authorization:E},y=function(e){return fetch("".concat(v,"/books/").concat(e),{headers:g}).then(function(e){return e.json()}).then(function(e){return e.book})},S=function(){return fetch("".concat(v,"/books"),{headers:g}).then(function(e){return e.json()}).then(function(e){return e.books})},N=function(e,t){return fetch("".concat(v,"/books/").concat(e.id),{method:"PUT",headers:Object(p.a)({},g,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},w=function(e){return fetch("".concat(v,"/search"),{method:"POST",headers:Object(p.a)({},g,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},O=function(e){return e.map(function(e){var t=e.id,a=e.title,n=e.authors,o=e.shelf,r=e.pageCount,l=e.previewLink,c=e.publishedDate,s=e.publisher,i=e.imageLinks,u=(i=void 0===i?{}:i).thumbnail,h=void 0===u?{}:u,m=i.smallThumbnail;return{id:t,title:a,authors:n,shelf:o,publishedDate:c,previewLink:l,publisher:s,pageCount:r,thumbnail:h,smallThumbnail:void 0===m?{}:m}})},j=function(e,t){var a;return function(){clearTimeout(a),a=setTimeout(function(){return e()},t)}};a(21);var R=function(e){var t=e.title,a=e.totalBooks;return o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,t,o.a.createElement("span",{style:{float:"right",color:"yellow"}},"Shelves books: #",a)))};a(33);var C=function(e){var t=e.title,a=e.list,n="Loading...";return n=0===a.length?"No content":"",o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},t,o.a.createElement("span",{style:{float:"right",color:"#bbb",fontStyle:"italic",fontWeight:"normal"}},"#",a.length," Books")),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},a,n)))};a(35);var T=function(e){var t=e.books,a=e.changeBookShelf,n=function(e){return t.filter(function(t){return t.shelf===e}).map(function(e){var t=e.id,n=e.title,r=e.pageCount,l=e.previewLink,c=e.publishedDate,s=e.publisher,i=e.thumbnail,u=e.authors,h=e.shelf;return o.a.createElement("li",{key:t},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(i,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{defaultValue:"move",onChange:function(t){return function(e,t){a(e.target.value,t)}(t,e)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"currentlyReading"===h?"\u2713":" ","Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"wantToRead"===h?"\u2713":" "," Want to Read"),o.a.createElement("option",{value:"read"},"read"===h?"\u2713":" "," Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},n),o.a.createElement("div",{className:"book-authors"},u.toString()),o.a.createElement("div",{className:"book-more-info"},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",null,"Publisher: "),s||"Unknown"),o.a.createElement("li",null,o.a.createElement("span",null,"Pub.Date: "),c),o.a.createElement("li",null,o.a.createElement("span",null,"Pages: "),r),o.a.createElement("li",null,o.a.createElement("a",{href:l,target:"_blank"},"Preview"))))))})};return o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement(C,{title:"Currently Reading",list:n("currentlyReading")}),o.a.createElement(C,{title:"Want to Read",list:n("wantToRead")}),o.a.createElement(C,{title:"Read",list:n("read")})))},B={DEBOUNCE_TIME:500},L=(a(37),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).searchForBooks=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===a.state.searchQuery){e.next=7;break}return e.next=3,w(a.state.searchQuery);case 3:"object"===typeof(t=e.sent)&&t.hasOwnProperty("error")?a.setState({booksList:[]}):a.setState({booksList:O(t)}),e.next=8;break;case 7:a.setState({searchQuery:"",booksList:[]});case 8:case"end":return e.stop()}},e,this)})),a.handleOnSearch=function(e){a.setState({searchQuery:e.target.value})},a.handleMoveToShelf=function(e,t){a.props.changeBookShelf(e.target.value,t)},a.handleBookShelf=function(){var e=Object(u.a)(i.a.mark(function e(t,n){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(n.id);case 2:o=e.sent,a.setState({bookShelf:o.shelf});case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleOnKeyUp=function(){a.getSearchData()},a.state={searchQuery:"",booksList:[],bookShelf:""},a.getSearchData=j(a.searchForBooks,B.DEBOUNCE_TIME),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(c.b,{to:"/",className:"close-search"}),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(t){return e.handleOnSearch(t)},onKeyUp:this.handleOnKeyUp,value:this.state.searchQuery}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},this.state.booksList.map(function(t){return o.a.createElement("li",{key:t.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.smallThumbnail,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{defaultValue:"move",onClick:function(a){return e.handleBookShelf(a,t)},onChange:function(a){return e.handleMoveToShelf(a,t)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"currentlyReading"===e.state.bookShelf?"\u2713":" ","Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"wantToRead"===e.state.bookShelf?"\u2713":" "," Want to Read"),o.a.createElement("option",{value:"read"},"read"===e.state.bookShelf?"\u2713":" "," Read"),o.a.createElement("option",{value:"none"},"none"===e.state.bookShelf?"\u2713":" "," None")))),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},t&&t.authors&&t.authors.toString())))}))))}}]),t}(n.Component)),x=(a(44),function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).state={bookList:[],showSearchPage:!1},a.handleChangeBookShelf=function(){var e=Object(u.a)(i.a.mark(function e(t,n){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(n,t);case 2:return e.next=4,S();case 4:o=e.sent,a.setState({bookList:O(o)});case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t=e.sent,this.setState({bookList:O(t)});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},o.a.createElement(k.a,{path:"/search",render:function(){return o.a.createElement(L,{changeBookShelf:e.handleChangeBookShelf})}}),o.a.createElement("div",{className:"list-books"},o.a.createElement(k.a,{exact:!0,path:"/",render:function(){return o.a.createElement("div",null,o.a.createElement(R,{title:"My Reads",totalBooks:e.state.bookList.length}),o.a.createElement(T,{books:e.state.bookList,changeBookShelf:e.handleChangeBookShelf}),o.a.createElement("div",{className:"open-search"},o.a.createElement(c.b,{className:"open-search",to:"/search"},"Add a book")))}})))}}]),t}(o.a.Component));a(46);l.a.render(o.a.createElement(c.a,null,o.a.createElement(x,null)),document.getElementById("root"))}},[[25,2,1]]]);
//# sourceMappingURL=main.e41d7c34.chunk.js.map